# SerialMotor

## プログラムについて

SerialMotorは、シリアル通信を通じてPWMモーターを制御するPython GUIアプリケーションです。シリアルポートを通じてモーターコントローラーにPWMコマンドを送信するための直感的なインターフェースを提供します。

## 機能

- **シリアル通信**: シリアルポートを通じてモーターコントローラーに接続
- **PWM制御**: 最大4つのモーターの個別PWM値を設定
- **一括PWM設定**: すべてのモーターを同じPWM値に同時設定
- **CAN ID設定**: モーター識別用のCAN IDを設定（1-4）
- **モーター制御**: モーターの開始/停止操作
- **ログ管理**: ファイル管理機能付きの包括的なログ機能
- **クロスプラットフォーム**: Windows、macOS、Linuxで動作

## 必要条件

- Python 3.7以上
- pyserialライブラリ

## インストール

1. このリポジトリをクローンまたはダウンロード
2. 必要な依存関係をインストール:

```bash
pip install pyserial
```

3. **ハードウェアセットアップ**: `src/main.cpp`をNucleo-F446REボードにPlatformIOを使用してアップロードしてください

## 使用方法

### アプリケーションの実行

```bash
python src/GUI-Serial.py
```

### GUIコンポーネント

1. **シリアルポート選択**
   - ドロップダウンから適切なシリアルポートを選択
   - 「Refresh」をクリックして利用可能なポートを更新

2. **CAN ID設定**
   -  CAN IDを設定（1-4）
   - 「Set CAN ID」をクリックして適用

3. **個別PWM値**
   - 各モーターのPWM値を個別に設定（-25000から25000）
   - 「Send All PWM Values」をクリックして個別設定を送信

4. **一括PWM設定**
   - すべてのモーターを同じPWM値に設定（-25000から25000）
   - 「Send All」をクリックして適用

5. **ログ管理**
   - **Create Log File**: ログファイル作成のON/OFF切り替え
   - **Open Log File**: デフォルトテキストエディタでログファイルを開く
   - **Clear Log File**: ログファイルの内容をクリア

6. **制御ボタン**
   - **Start (i)**: モーター操作開始
   - **Stop (o)**: モーター操作停止

### コマンド形式

- **CAN ID設定**: `c{id}` (例: `c1`)
- **個別PWM**: `p0:{value0},p1:{value1},p2:{value2},p3:{value3}`
- **一括PWM**: `{value}`
- **制御コマンド**: `i` (開始), `o` (停止) - これらはキーボード操作ではなく、GUIからシリアル通信で送信されるコマンドです


## 設定

### シリアル設定
- **ボーレート**: 115200
- **タイムアウト**: 1秒
- **データビット**: 8
- **パリティ**: なし
- **ストップビット**: 1

### PWM範囲
- **最小値**: -25000
- **最大値**: 25000

### CAN ID範囲
- **最小値**: 1
- **最大値**: 4

## ログ機能

アプリケーションは`serial_gui.log`ファイルを作成し、以下を記録します：
- シリアルポート操作
- PWM値の変更
- エラーメッセージ
- アプリケーション状態の更新

ログファイルはGUIを通じて管理できます：
- ログ機能の有効/無効切り替え
- ログファイルの表示
- ログ内容のクリア

## エラーハンドリング

アプリケーションには以下の包括的なエラーハンドリングが含まれています：
- シリアルポート接続の問題
- 無効な入力値
- ファイル操作エラー
- 権限エラー

---

＊GUI-Serial-v2.pyは現状使用できません。
＊このファイルはClaude Sonnet 4によって生成されました。